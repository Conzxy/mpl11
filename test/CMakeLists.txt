#=============================================================================
# Setup unit tests
#=============================================================================
add_custom_target(unit COMMENT "build all the unit tests")

function(mpl11_add_test name sources)
    add_executable(${name} EXCLUDE_FROM_ALL ${sources})
    add_test(NAME ${name} COMMAND ${name})
    add_dependencies(unit ${name})
endfunction()


mpl11_add_test(all_of                     all_of.cpp)
mpl11_add_test(always                     always.cpp)
mpl11_add_test(any_of                     any_of.cpp)
mpl11_add_test(apply_wrap                 apply_wrap.cpp)
mpl11_add_test(associative_sequence       associative_sequence.cpp)
mpl11_add_test(back_extensible_container  back_extensible_container.cpp)
mpl11_add_test(bidirectional_iterator     bidirectional_iterator.cpp)
mpl11_add_test(bidirectional_sequence     bidirectional_sequence.cpp)
mpl11_add_test(class_of                   class_of.cpp)
mpl11_add_test(comparable                 comparable.cpp)
mpl11_add_test(count                      count.cpp)
mpl11_add_test(count_if                   count_if.cpp)
mpl11_add_test(couple                     couple.cpp)
mpl11_add_test(detail_conditional         detail/conditional.cpp)
mpl11_add_test(detail_dependent_on        detail/dependent_on.cpp)
mpl11_add_test(detail_either              detail/either.cpp)
mpl11_add_test(detail_is_same             detail/is_same.cpp)
mpl11_add_test(detail_is_specialization   detail/is_specialization.cpp)
mpl11_add_test(detail_move                detail/move.cpp)
mpl11_add_test(detail_variadic_at         detail/variadic/at.cpp)
mpl11_add_test(detail_variadic_concat     detail/variadic/concat.cpp)
mpl11_add_test(detail_variadic_drop       detail/variadic/drop.cpp)
mpl11_add_test(detail_variadic_fill       detail/variadic/fill.cpp)
mpl11_add_test(detail_variadic_rebind     detail/variadic/rebind.cpp)
mpl11_add_test(detail_variadic_slice      detail/variadic/slice.cpp)
mpl11_add_test(detail_variadic_take       detail/variadic/take.cpp)
mpl11_add_test(directional_sequence       directional_sequence.cpp)
mpl11_add_test(empty_base                 empty_base.cpp)
mpl11_add_test(find                       find.cpp)
mpl11_add_test(find_if                    find_if.cpp)
mpl11_add_test(foldl                      foldl.cpp)
mpl11_add_test(foldr                      foldr.cpp)
mpl11_add_test(forward_iterator           forward_iterator.cpp)
mpl11_add_test(front_extensible_container front_extensible_container.cpp)
mpl11_add_test(identity                   identity.cpp)
mpl11_add_test(if                         if.cpp)
mpl11_add_test(integral_c                 integral_c.cpp)
mpl11_add_test(into                       into.cpp)
mpl11_add_test(logical                    logical.cpp)
mpl11_add_test(master_header              master_header.cpp)
mpl11_add_test(max                        max.cpp)
mpl11_add_test(min                        min.cpp)
mpl11_add_test(none_of                    none_of.cpp)
mpl11_add_test(orderable                  orderable.cpp)
mpl11_add_test(pair                       pair.cpp)
mpl11_add_test(quote                      quote.cpp)
mpl11_add_test(random_access_sequence     random_access_sequence.cpp)
mpl11_add_test(sequence                   sequence.cpp)
mpl11_add_test(type                       type.cpp)
mpl11_add_test(unpack                     unpack.cpp)
mpl11_add_test(vector                     vector.cpp)

add_executable(benchmark_vector50_at       EXCLUDE_FROM_ALL benchmark/vector50_at.cpp)
add_executable(benchmark_vector50_pop_back EXCLUDE_FROM_ALL benchmark/vector50_pop_back.cpp)
